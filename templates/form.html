<!doctype html><html lang="ru"><head><meta charset="utf-8"><title>Форма буровика</title><link rel="stylesheet" href="/static/style.css"></head><body><div class="card"><h2>Форма сводки</h2><form id="reportForm"><label>Дата и время<br><input type="datetime-local" name="date_time" id="date_time" required></label><br><label>МБУ (место буровика)<br><input name="location" id="location" required></label><br><label>Номер буровой<br><input name="rig_number" id="rig_number" required></label><br><label>Метраж<br><input type="number" step="0.1" name="meterage" id="meterage" required></label><br><label>Погонометр<br><input type="number" step="0.1" name="pogon" id="pogon" required></label><br><label>Виды операции<br><input name="note" id="note"></label><br><div id="message" style="color:green;margin-top:8px;display:none;"></div><button type="submit">Отправить</button></form><p><a href="/">Главная</a> | <a href="/logout">Выход</a></p></div><script>const form=document.getElementById('reportForm');form.addEventListener('submit',async(e)=>{e.preventDefault();const data=new FormData(form);let dt=data.get('date_time');if(!dt) dt=new Date().toISOString();data.set('date_time',dt);const resp=await fetch('/submit',{method:'POST',body:data});const json=await resp.json();const msg=document.getElementById('message');if(resp.ok){msg.textContent=json.message||'Отправлено';msg.style.display='block';form.reset();}else{msg.textContent=json.detail||json.error||'Ошибка';msg.style.color='red';msg.style.display='block';}setTimeout(()=>{msg.style.display='none';msg.style.color='green';},4000);});</script></body></html>