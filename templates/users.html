<!doctype html>
<html><head><meta charset="utf-8"><title>Пользователи</title><link rel="stylesheet" href="/static/style.css"></head>
<body><div class="card"><h1>Пользователи</h1>
<p>Пользователь: {{ user.full_name or user.username }} (<a href="/logout">выйти</a>)</p>
{% if error %}<div class="error">{{ error }}</div>{% endif %}
<h2>Создать пользователя</h2>
<form method="post" action="/create_user">
  <label>Логин: <input name="username" required></label>
  <label>ФИО: <input name="full_name"></label>
  <label>Пароль: <input name="password" required></label>
  <label>Роль: <select name="role"><option value="worker">worker</option><option value="dispatcher">dispatcher</option></select></label>
  <label>Участок:
    <select name="site">
      <option value=''>--</option>
      {% for s in sites %}<option value="{{ s }}">{{ s }}</option>{% endfor %}
    </select>
  </label>
  <button type="submit">Создать</button>
</form>
<h2>Список</h2>
<table class="reports"><thead><tr><th>ID</th><th>Логин</th><th>ФИО</th><th>Роль</th><th>Участок</th></tr></thead><tbody>
{% for u in users %}
  <tr><td>{{ u.id }}</td><td>{{ u.username }}</td><td>{{ u.full_name or u.fio }}</td><td>{{ u.role }}</td><td>{{ u.location or u.site }}</td></tr>
{% endfor %}
</tbody></table>
<p><a href="/dispatcher">Назад</a></p>
</div></body></html>
